# SVGè½¬PNGå·¥å…· - ä½¿ç”¨è¯´æ˜

è¿™ä¸ªå·¥å…·å·²ç»ä¼˜åŒ–ä»¥æ”¯æŒå¤æ‚çš„SVGæ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯Mermaidç”Ÿæˆçš„æµç¨‹å›¾ï¼Œå¹¶æä¾›ä¸¤ç§æ¸²æŸ“æ¨¡å¼ï¼šåº“æ¸²æŸ“å’Œæµè§ˆå™¨æ¸²æŸ“ã€‚

## æ¸²æŸ“æ¨¡å¼å¯¹æ¯”

### ğŸ”§ åº“æ¸²æŸ“æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
- âœ… é€Ÿåº¦å¿«ï¼Œæ€§èƒ½ä¼˜ç§€
- âœ… æ— éœ€å¤–éƒ¨ä¾èµ–
- âœ… é€‚åˆç®€å•åˆ°ä¸­ç­‰å¤æ‚åº¦çš„SVG
- âŒ å¯¹å¤æ‚CSSæ ·å¼æ”¯æŒæœ‰é™
- âŒ ä¸æ”¯æŒWebå­—ä½“å’ŒJavaScript

### ğŸŒ æµè§ˆå™¨æ¸²æŸ“æ¨¡å¼
- âœ… å®Œç¾æ”¯æŒæ‰€æœ‰CSSæ ·å¼
- âœ… æ”¯æŒWebå­—ä½“å’Œå¤æ‚æ’ç‰ˆ
- âœ… æ”¯æŒJavaScriptåŠ¨æ€å†…å®¹
- âœ… æœ€é«˜çš„SVGå…¼å®¹æ€§
- âŒ éœ€è¦Chrome/Chromium
- âŒ é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢

## åŸºæœ¬ç”¨æ³•

### å•æ–‡ä»¶è½¬æ¢

#### åº“æ¸²æŸ“æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
```bash
# åŸºæœ¬è½¬æ¢
go run main.go -input example.svg

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶å’Œå°ºå¯¸
go run main.go -input mermaid_flowchart.svg -output flowchart.png -width 1200

# ä½¿ç”¨ç™½è‰²èƒŒæ™¯
go run main.go -input complex_flow.svg -width 800 -bg white
```

#### æµè§ˆå™¨æ¸²æŸ“æ¨¡å¼
```bash
# ä½¿ç”¨æµè§ˆå™¨æ¸²æŸ“
go run main.go -input mermaid_flowchart.svg -browser -width 1200 -bg white

# æµè§ˆå™¨æ¸²æŸ“ + è¯¦ç»†è¾“å‡º
go run main.go -input complex_flow.svg -browser -verbose

# è‡ªå®šä¹‰è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤30ç§’ï¼‰
go run main.go -input large_file.svg -browser -timeout 60
```

### æ‰¹é‡è½¬æ¢
```bash
# åº“æ¸²æŸ“æ‰¹é‡è½¬æ¢
go run main.go -batch -width 800 -bg white

# æµè§ˆå™¨æ¸²æŸ“æ‰¹é‡è½¬æ¢
go run main.go -batch -browser -width 1000 -bg white -verbose

# è½¬æ¢æŒ‡å®šç›®å½•
go run main.go -batch -browser -dir ./svg_files -width 1200
```

## å‚æ•°è¯´æ˜

| å‚æ•° | æè¿° | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|------|
| `-input` | è¾“å…¥SVGæ–‡ä»¶è·¯å¾„ | æ—  | `-input flowchart.svg` |
| `-output` | è¾“å‡ºPNGæ–‡ä»¶è·¯å¾„ | è‡ªåŠ¨ç”Ÿæˆ | `-output result.png` |
| `-width` | è¾“å‡ºå›¾ç‰‡å®½åº¦(åƒç´ ) | è‡ªåŠ¨ | `-width 1200` |
| `-height` | è¾“å‡ºå›¾ç‰‡é«˜åº¦(åƒç´ ) | è‡ªåŠ¨ | `-height 800` |
| `-scale` | ç¼©æ”¾æ¯”ä¾‹ | 1.0 | `-scale 2.0` |
| `-bg` | èƒŒæ™¯è‰² | transparent | `-bg white` |
| `-quality` | PNGå‹ç¼©è´¨é‡(1-9) | 9 | `-quality 5` |
| `-verbose` | æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ | false | `-verbose` |
| `-batch` | æ‰¹é‡å¤„ç†æ¨¡å¼ | false | `-batch` |
| `-dir` | æ‰¹é‡å¤„ç†ç›®å½• | å½“å‰ç›®å½• | `-dir ./images` |
| **`-browser`** | **ä½¿ç”¨æµè§ˆå™¨æ¸²æŸ“æ¨¡å¼** | **false** | **`-browser`** |
| **`-timeout`** | **æµè§ˆå™¨æ¸²æŸ“è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰** | **30** | **`-timeout 60`** |
| **`-headless`** | **æ— å¤´æµè§ˆå™¨æ¨¡å¼** | **true** | **`-headless=false`** |

## èƒŒæ™¯è‰²é€‰é¡¹

æ”¯æŒä»¥ä¸‹èƒŒæ™¯è‰²è®¾ç½®ï¼š
- `transparent` - é€æ˜èƒŒæ™¯ï¼ˆé»˜è®¤ï¼‰
- `white` - ç™½è‰²èƒŒæ™¯
- `black` - é»‘è‰²èƒŒæ™¯  
- `#ffffff` - åå…­è¿›åˆ¶é¢œè‰²ä»£ç 

## å¤æ‚SVGæ”¯æŒ

### åº“æ¸²æŸ“æ¨¡å¼æ”¯æŒï¼š
- âœ… åŸºæœ¬SVGå½¢çŠ¶å’Œè·¯å¾„
- âœ… ç®€å•CSSæ ·å¼
- âœ… ä¸­æ–‡æ–‡æœ¬å†…å®¹
- âœ… åŸºæœ¬å˜æ¢å’Œæ»¤é•œ
- âœ… Mermaidæµç¨‹å›¾ï¼ˆå¤§éƒ¨åˆ†ï¼‰

### æµè§ˆå™¨æ¸²æŸ“æ¨¡å¼é¢å¤–æ”¯æŒï¼š
- âœ… å¤æ‚CSSæ ·å¼å’ŒåŠ¨ç”»
- âœ… Webå­—ä½“ï¼ˆGoogle Fontsç­‰ï¼‰
- âœ… JavaScriptç”Ÿæˆçš„å†…å®¹
- âœ… CSS3é«˜çº§ç‰¹æ€§
- âœ… å¤æ‚çš„foreignObjectå†…å®¹
- âœ… SVG2.0æ–°ç‰¹æ€§

## é€‰æ‹©æ¸²æŸ“æ¨¡å¼çš„å»ºè®®

### ä½¿ç”¨åº“æ¸²æŸ“æ¨¡å¼çš„æƒ…å†µï¼š
- ç®€å•çš„å›¾æ ‡å’Œæ ‡å¿—
- åŸºæœ¬çš„å›¾è¡¨å’Œå›¾å½¢
- éœ€è¦å¿«é€Ÿæ‰¹é‡å¤„ç†
- æœåŠ¡å™¨ç¯å¢ƒæ— æ³•å®‰è£…æµè§ˆå™¨

### ä½¿ç”¨æµè§ˆå™¨æ¸²æŸ“æ¨¡å¼çš„æƒ…å†µï¼š
- å¤æ‚çš„Mermaidæµç¨‹å›¾
- åŒ…å«Webå­—ä½“çš„è®¾è®¡
- ä½¿ç”¨äº†å¤æ‚CSSçš„SVG
- éœ€è¦æœ€é«˜çš„è§†è§‰ä¿çœŸåº¦
- åŒ…å«JavaScriptäº¤äº’çš„SVG

## ä½¿ç”¨ç¤ºä¾‹

### 1. å¯¹æ¯”ä¸¤ç§æ¸²æŸ“æ¨¡å¼
```bash
# åº“æ¸²æŸ“
go run main.go -input mermaid_flowchart.svg -output flowchart_lib.png -width 1200 -bg white

# æµè§ˆå™¨æ¸²æŸ“
go run main.go -input mermaid_flowchart.svg -output flowchart_browser.png -browser -width 1200 -bg white
```

### 2. å¤„ç†å¤æ‚çš„è®¾è®¡æ–‡ä»¶
```bash
# ä½¿ç”¨æµè§ˆå™¨æ¸²æŸ“å¤„ç†åŒ…å«Webå­—ä½“çš„è®¾è®¡
go run main.go -input design.svg -browser -width 1920 -bg white -timeout 45
```

### 3. æ‰¹é‡å¤„ç†é¡¹ç›®å›¾æ ‡
```bash
# å¿«é€Ÿå¤„ç†ç®€å•å›¾æ ‡ï¼ˆåº“æ¸²æŸ“ï¼‰
go run main.go -batch -width 256 -bg transparent

# é«˜è´¨é‡å¤„ç†å¤æ‚å›¾æ ‡ï¼ˆæµè§ˆå™¨æ¸²æŸ“ï¼‰
go run main.go -batch -browser -width 512 -bg white
```

### 4. å¤§æ–‡ä»¶å¤„ç†
```bash
# å¤„ç†å¤§å‹å¤æ‚SVGï¼Œå¢åŠ è¶…æ—¶æ—¶é—´
go run main.go -input large_diagram.svg -browser -width 2048 -timeout 120 -verbose
```

## æ€§èƒ½å¯¹æ¯”

| ç‰¹æ€§ | åº“æ¸²æŸ“ | æµè§ˆå™¨æ¸²æŸ“ |
|------|--------|------------|
| é€Ÿåº¦ | å¿«ï¼ˆ<1ç§’ï¼‰ | ä¸­ç­‰ï¼ˆ2-10ç§’ï¼‰ |
| å†…å­˜ä½¿ç”¨ | ä½ | ä¸­ç­‰ |
| CPUä½¿ç”¨ | ä½ | ä¸­ç­‰ |
| å…¼å®¹æ€§ | åŸºæœ¬ | å®Œå…¨ |
| ä¾èµ– | æ—  | Chrome/Chromium |

## æ•…éšœæ’é™¤

### æµè§ˆå™¨æ¸²æŸ“ç›¸å…³é—®é¢˜

1. **"æµè§ˆå™¨æ¸²æŸ“å¤±è´¥"é”™è¯¯**
   - ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…Chromeæˆ–Chromium
   - å¢åŠ è¶…æ—¶æ—¶é—´ï¼š`-timeout 60`
   - æ£€æŸ¥ç³»ç»Ÿèµ„æºæ˜¯å¦å……è¶³

2. **æ¸²æŸ“ç»“æœä¸å®Œæ•´**
   - å¢åŠ ç­‰å¾…æ—¶é—´ï¼ˆä»£ç ä¸­å·²è®¾ç½®1ç§’ï¼‰
   - æ£€æŸ¥SVGä¸­æ˜¯å¦æœ‰å¼‚æ­¥åŠ è½½çš„èµ„æº
   - å°è¯•ä½¿ç”¨éæ— å¤´æ¨¡å¼è°ƒè¯•ï¼š`-headless=false`

3. **æ€§èƒ½é—®é¢˜**
   - å¯¹äºç®€å•SVGï¼Œä¼˜å…ˆä½¿ç”¨åº“æ¸²æŸ“æ¨¡å¼
   - æ‰¹é‡å¤„ç†æ—¶è€ƒè™‘å‡å°‘å¹¶å‘æ•°
   - é€‚å½“è°ƒæ•´å›¾ç‰‡å°ºå¯¸

### å¸¸è§é—®é¢˜

1. **ä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºä¸æ­£ç¡®**
   - åº“æ¸²æŸ“ï¼šç¡®ä¿SVGæ–‡ä»¶ç¼–ç ä¸ºUTF-8
   - æµè§ˆå™¨æ¸²æŸ“ï¼šé€šå¸¸èƒ½è‡ªåŠ¨å¤„ç†å­—ä½“é—®é¢˜

2. **è½¬æ¢åå›¾åƒæ¨¡ç³Š**
   - å¢åŠ è¾“å‡ºå°ºå¯¸ï¼š`-width 1200` æˆ–æ›´é«˜
   - ä½¿ç”¨ç¼©æ”¾å‚æ•°ï¼š`-scale 2.0`
   - æµè§ˆå™¨æ¸²æŸ“é€šå¸¸æä¾›æ›´å¥½çš„æ–‡æœ¬æ¸…æ™°åº¦

3. **æ–‡ä»¶å¤§å°è¿‡å¤§**
   - é™ä½å‹ç¼©è´¨é‡ï¼š`-quality 5`
   - å‡å°‘è¾“å‡ºå°ºå¯¸
   - æµè§ˆå™¨æ¸²æŸ“çš„è¾“å‡ºé€šå¸¸æ›´å°

## ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶

```bash
# Windows
go build -o svgtopng.exe main.go

# Linux/Mac
go build -o svgtopng main.go
```

ç„¶åå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š
```bash
# åº“æ¸²æŸ“
./svgtopng -input example.svg -width 800 -bg white

# æµè§ˆå™¨æ¸²æŸ“
./svgtopng -input example.svg -browser -width 800 -bg white
```

## ç³»ç»Ÿè¦æ±‚

### åº“æ¸²æŸ“æ¨¡å¼
- Go 1.18+
- æ— å…¶ä»–ä¾èµ–

### æµè§ˆå™¨æ¸²æŸ“æ¨¡å¼
- Go 1.18+
- Chromeæˆ–Chromiumæµè§ˆå™¨
- å……è¶³çš„ç³»ç»Ÿå†…å­˜ï¼ˆå»ºè®®4GB+ï¼‰ 